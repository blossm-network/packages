domain: principle
service: core

schema:
  roles: [String]
  contexts: [String]

actions:
  - add-roles
  - remove-roles
  - add-contexts
  - remove-contexts

dependencies:
  "@blossm/array-difference": "*"

testing:
  examples:
    first:
      action: add-roles
      payload:
        roles:
          - some-role
          - some-other-role
    second:
      action: remove-roles
      payload:
        roles:
          - some-role
    more:
      - action: add-contexts
        payload:
          contexts:
            - some-context
      - action: remove-contexts
        payload:
          contexts:
            - some-context

  handlers:
    - action: add-roles
      examples:
        - state:
            roles:
              - some-role
          payload:
            roles:
              - some-role
              - some-other-role
          result:
            roles:
              - some-role
              - some-other-role
    - action: remove-roles
      examples:
        - state:
            roles:
              - some-role
              - some-other-role
          payload:
            roles:
              - some-role
          result:
            roles:
              - some-other-role
    - action: add-contexts
      examples:
        - state:
            contexts:
              - some-context
          payload:
            contexts:
              - some-context
              - some-other-context
          result:
            contexts:
              - some-context
              - some-other-context
    - action: remove-contexts
      examples:
        - state:
            contexts:
              - some-context
              - some-other-context
          payload:
            contexts:
              - some-context
          result:
            contexts:
              - some-other-context

#don't change
context: event-store
