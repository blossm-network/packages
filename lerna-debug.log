0 silly argv { _: [ 'version' ],
0 silly argv   lernaVersion: '3.16.4',
0 silly argv   '$0':
0 silly argv    '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin/lerna',
0 silly argv   bump: 'patch' }
1 notice cli v3.16.4
2 verbose rootPath /Users/joao/Documents/repos/sustainer-network/sustainers-market-js
3 info versioning independent
4 silly isAnythingCommitted
5 verbose isAnythingCommitted 1
6 silly currentBranch
7 verbose currentBranch master
8 silly remoteBranchExists
9 silly isBehindUpstream
10 silly isBehindUpstream master is behind origin/master by 0 commit(s) and ahead by 1
11 silly hasTags
12 verbose hasTags true
13 silly git-describe.sync "@sustainers/issue-command-js@0.0.4-1-g00b5663" => {"lastTagName":"@sustainers/issue-command-js@0.0.4","lastVersion":"0.0.4","refCount":"1","sha":"00b5663","isDirty":false}
14 info Looking for changed packages since @sustainers/issue-command-js@0.0.4
15 info ignoring diff in paths matching [ '*.md' ]
16 silly checking diff packages/consts
17 silly no diff found in @sustainers/consts
18 silly checking diff packages/errors
19 silly no diff found in @sustainers/errors
20 silly checking diff packages/exec/domains/auth_token/command_handlers/create/http
21 silly no diff found in @sustainers/create-auth-token-command-handler
22 silly checking diff packages/exec/event_store/add/http
23 silly no diff found in @sustainers/event-store-add-service
24 silly checking diff packages/exec/event_store/aggregate/http
25 silly no diff found in @sustainers/event-store-aggregate-service
26 silly checking diff packages/exec/gateways/core/http
27 silly no diff found in @sustainers/core-gateway
28 silly checking diff packages/kms
29 silly no diff found in @sustainers/kms
30 silly checking diff packages/lib/array_intersection
31 silly no diff found in @sustainers/array-intersection
32 silly checking diff packages/lib/authorize
33 silly no diff found in @sustainers/authorize
34 silly checking diff packages/lib/authorize_command
35 silly no diff found in @sustainers/authorize-command
36 silly checking diff packages/lib/clean_command
37 silly found diff in packages/lib/clean_command/index.js
37 silly found diff in packages/lib/clean_command/test/index.js
38 verbose filtered diff [ 'packages/lib/clean_command/index.js',
38 verbose filtered diff   'packages/lib/clean_command/test/index.js' ]
39 silly checking diff packages/lib/command_info_from_req
40 silly no diff found in @sustainers/command-info-from-req
41 silly checking diff packages/lib/create_event
42 silly no diff found in @sustainers/create-event
43 silly checking diff packages/lib/datetime
44 silly no diff found in @sustainers/datetime
45 silly checking diff packages/lib/email_validator
46 silly no diff found in @sustainers/email-validator
47 silly checking diff packages/lib/event_bus
48 silly no diff found in @sustainers/event-bus
49 silly checking diff packages/lib/event_store
50 silly no diff found in @sustainers/event-store
51 silly checking diff packages/lib/jwt
52 silly no diff found in @sustainers/jwt
53 silly checking diff packages/lib/nonce
54 silly no diff found in @sustainers/nonce
55 silly checking diff packages/lib/normalize_command
56 silly no diff found in @sustainers/normalize-command
57 silly checking diff packages/lib/phone_number
58 silly no diff found in @sustainers/phone-number
59 silly checking diff packages/lib/request
60 silly no diff found in @sustainers/request
61 silly checking diff packages/lib/tokens_from_req
62 silly no diff found in @sustainers/tokens-from-req
63 silly checking diff packages/lib/uuid
64 silly no diff found in @sustainers/uuid
65 silly checking diff packages/lib/validate_command
66 silly found diff in packages/lib/validate_command/index.js
66 silly found diff in packages/lib/validate_command/test/index.js
67 verbose filtered diff [ 'packages/lib/validate_command/index.js',
67 verbose filtered diff   'packages/lib/validate_command/test/index.js' ]
68 silly checking diff packages/lib/validation
69 silly no diff found in @sustainers/validation
70 silly checking diff packages/libraries/event_store/js
71 silly no diff found in @sustainers/event-store-js
72 silly checking diff packages/libraries/issue_command/js
73 silly no diff found in @sustainers/issue-command-js
74 silly checking diff packages/libraries/operation/js
75 silly no diff found in @sustainers/operation-js
76 silly checking diff packages/logging/log_transports
77 silly no diff found in @sustainers/log-transports
78 silly checking diff packages/logging/logger
79 silly no diff found in @sustainers/logger
80 silly checking diff packages/middleware/command
81 silly no diff found in @sustainers/command-middleware
82 silly checking diff packages/middleware/event-store
83 silly no diff found in @sustainers/event-store-middleware
84 silly checking diff packages/utils/validator
85 silly no diff found in @sustainers/validator
86 verbose updated @sustainers/create-auth-token-command-handler
87 verbose updated @sustainers/core-gateway
88 verbose updated @sustainers/clean-command
89 verbose updated @sustainers/validate-command
90 verbose git-describe undefined => "@sustainers/issue-command-js@0.0.4-1-g00b5663"
91 silly git-describe parsed => {"lastTagName":"@sustainers/issue-command-js@0.0.4","lastVersion":"0.0.4","refCount":"1","sha":"00b5663","isDirty":false}
92 info execute Skipping releases
93 silly lifecycle "preversion" starting in "@sustainer-network/js"
94 info lifecycle @sustainer-network/js@0.0.0~preversion: @sustainer-network/js@0.0.0
95 warn lifecycle The node binary used for scripts is /var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/yarn--1568321361187-0.008245556212648664/node but npm is using /Users/joao/.nvm/versions/node/v10.16.0/bin/node itself. Use the `--scripts-prepend-node-path` option to include the path for the node binary npm was executed with.
96 verbose lifecycle @sustainer-network/js@0.0.0~preversion: unsafe-perm in lifecycle true
97 verbose lifecycle @sustainer-network/js@0.0.0~preversion: PATH: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/npm-lifecycle/node-gyp-bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/yarn--1568321361187-0.008245556212648664:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.config/yarn/link/node_modules/.bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.nvm/versions/node/v10.16.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools
98 verbose lifecycle @sustainer-network/js@0.0.0~preversion: CWD: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js
99 silly lifecycle @sustainer-network/js@0.0.0~preversion: Args: [ '-c', 'yarn test' ]
100 silly lifecycle @sustainer-network/js@0.0.0~preversion: Returned: code: 0  signal: null
101 silly lifecycle "preversion" finished in "@sustainer-network/js"
102 silly lifecycle No script for "preversion" in "@sustainers/clean-command", continuing
103 silly lifecycle No script for "preversion" in "@sustainers/validate-command", continuing
104 silly lifecycle No script for "version" in "@sustainers/clean-command", continuing
105 silly lifecycle No script for "version" in "@sustainers/validate-command", continuing
106 silly lifecycle No script for "preversion" in "@sustainers/create-auth-token-command-handler", continuing
107 silly lifecycle No script for "preversion" in "@sustainers/core-gateway", continuing
108 silly lifecycle No script for "version" in "@sustainers/create-auth-token-command-handler", continuing
109 silly lifecycle No script for "version" in "@sustainers/core-gateway", continuing
110 silly lifecycle "version" starting in "@sustainer-network/js"
111 info lifecycle @sustainer-network/js@0.0.0~version: @sustainer-network/js@0.0.0
112 verbose lifecycle @sustainer-network/js@0.0.0~version: unsafe-perm in lifecycle true
113 verbose lifecycle @sustainer-network/js@0.0.0~version: PATH: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/npm-lifecycle/node-gyp-bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/yarn--1568321361187-0.008245556212648664:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.config/yarn/link/node_modules/.bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.nvm/versions/node/v10.16.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools
114 verbose lifecycle @sustainer-network/js@0.0.0~version: CWD: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js
115 silly lifecycle @sustainer-network/js@0.0.0~version: Args: [ '-c', 'auto-changelog && git add CHANGELOG.md' ]
116 silly lifecycle @sustainer-network/js@0.0.0~version: Returned: code: 0  signal: null
117 silly lifecycle "version" finished in "@sustainer-network/js"
118 silly gitAdd [ '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/lib/clean_command/package.json',
118 silly gitAdd   '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/lib/validate_command/package.json',
118 silly gitAdd   '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/exec/domains/auth_token/command_handlers/create/http/package.json',
118 silly gitAdd   '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/exec/gateways/core/http/package.json' ]
119 silly gitCommit Publish
119 silly gitCommit
119 silly gitCommit  - @sustainers/create-auth-token-command-handler@0.0.2
119 silly gitCommit  - @sustainers/core-gateway@0.0.2
119 silly gitCommit  - @sustainers/clean-command@0.0.2
119 silly gitCommit  - @sustainers/validate-command@0.0.2
120 verbose git [ 'commit',
120 verbose git   '-F',
120 verbose git   '/private/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/49a7fd26-0bf0-4db4-855d-23fecbd86b90/lerna-commit.txt' ]
121 error Error: Command failed: git commit -F /private/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/49a7fd26-0bf0-4db4-855d-23fecbd86b90/lerna-commit.txt
121 error
121 error Warning: Setting pre-commit script in package.json > scripts will be deprecated
121 error Please move it to husky.hooks in package.json, a .huskyrc file, or a husky.config.js file
121 error Or run ./node_modules/.bin/husky-upgrade for automatic update
121 error
121 error See https://github.com/typicode/husky for usage
121 error
121 error husky > pre-commit (node v10.16.0)
121 error $ lerna run test
121 error lerna notice cli v3.16.4
121 error lerna info versioning independent
121 error lerna info Executing command in 32 packages: "yarn run test"
121 error lerna info run Ran npm script 'test' in '@sustainers/consts' in 1.1s:
121 error $ echo 'no tests'
121 error no tests
121 error lerna info run Ran npm script 'test' in '@sustainers/array-intersection' in 2.1s:
121 error $ mocha
121 error
121 error
121 error   Intersection
121 error     ✓ should return the common items if one exist
121 error     ✓ should return the common items if multiple exist
121 error     ✓ should return an empty array if no common elements exist
121 error
121 error
121 error   3 passing (18ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/clean-command' in 2.1s:
121 error $ mocha
121 error
121 error
121 error   Clean command
121 error     ✓ should clean the request correctly
121 error     ✓ should add a payload
121 error
121 error
121 error   2 passing (23ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/command-info-from-req' in 1.9s:
121 error $ mocha
121 error
121 error
121 error   Command name from req host
121 error     ✓ should return the correct command name.
121 error     ✓ should return null if there are only three subdomains in the host.
121 error     ✓ should return null if the host is not formatted as expected.
121 error
121 error
121 error   3 passing (17ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/email-validator' in 2.1s:
121 error $ mocha
121 error
121 error
121 error   Valid emails
121 error     ✓ should not throw when given a valid email
121 error
121 error   Invalid emails
121 error     ✓ should throw when given an invalid email
121 error
121 error
121 error   2 passing (53ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/datetime' in 2.4s:
121 error $ mocha
121 error
121 error
121 error   Converts correctly
121 error     ✓ it should return correct components
121 error
121 error   Converts correctly
121 error     ✓ it should return correct components
121 error
121 error   Creates correctly
121 error     ✓ it should create a new moment that equals the passed in moment
121 error     ✓ it should edit the copy moment without affecting the first moment
121 error
121 error   Creates correctly
121 error     ✓ it should return a timestamp that equals now
121 error
121 error   Converts correctly
121 error     ✓ it should return a timestamp used to create the date
121 error
121 error   Converts correctly
121 error     ✓ it should return an expected string based on the utc timestamp
121 error
121 error   Creates correctly
121 error     ✓ it should return a moment that equals now
121 error
121 error   Converts correctly
121 error     ✓ it should return the correct moment
121 error
121 error   Converts correctly
121 error     ✓ it should return a moment with the same timestamp used to create it
121 error
121 error   Creates correctly
121 error     ✓ it should return a timestamp that equals now
121 error
121 error   Converts correctly
121 error     ✓ it should return the correct timestamp
121 error
121 error   Converts correctly
121 error     ✓ it should return a timestamp used to create the date
121 error
121 error   Converts correctly
121 error     ✓ it should return a timestamp used to create the moment
121 error
121 error   Converts correctly
121 error     ✓ it should return an expected string based on the utc timestamp
121 error
121 error
121 error   15 passing (96ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/kms' in 4.6s:
121 error $ mocha --recursive --timeout=10000
121 error
121 error
121 error   Kms sign
121 error     ✓ should sign correctly
121 error     ✓ should throw correctly
121 error
121 error   Kms verify
121 error     ✓ should throw correctly
121 error     ✓ should get the public key correctly
121 error     ✓ shouldn't call the service if the key has already been retrieved
121 error     ✓ should sign and verify correctly (1355ms)
121 error     ✓ should fail if messages dont match (353ms)
121 error
121 error
121 error   7 passing (2s)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/event-bus' in 3.0s:
121 error $ mocha
121 error
121 error
121 error   Event bus
121 error     ✓ should call publish with the correct params
121 error     ✓ should call publish with the correct params and add a payload if missing
121 error
121 error
121 error   2 passing (29ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/nonce' in 2.1s:
121 error $ mocha
121 error
121 error
121 error   Create
121 error     ✓ it should create a unique nonce
121 error
121 error
121 error   1 passing (38ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/phone-number' in 2.5s:
121 error $ mocha
121 error
121 error
121 error   Valid numbers
121 error     ✓ should return an E164 formatted phone number, if the input is a valid phone number
121 error     ✓ should return an E164 formatted phone number, if the input is a valid phone number with seperator symbols
121 error     ✓ should return an E164 formatted phone number, if the input is a valid international phone number
121 error     ✓ should return an E164 formatted phone number, if the input is a valid international phone number with symbols
121 error
121 error   Invalid numbers
121 error     ✓ should return null if the input is not a valid phone number
121 error     ✓ should return null if the input is null
121 error     ✓ should return null if the input is empty
121 error
121 error
121 error   7 passing (102ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/event-store' in 3.4s:
121 error $ mocha --recursive
121 error
121 error
121 error   Event store add
121 error     ✓ should call add with the correct params if table exists
121 error     ✓ should call add with the correct params if table does not exists
121 error
121 error   Event store hydrate
121 error     ✓ should call hydrate with the correct params if table exists
121 error     ✓ should call hydrate with the correct params if table does not exists
121 error     ✓ should call hydrate and throw error if needed
121 error     ✓ should call hydrate with the correct params and correct reducing if exists
121 error
121 error
121 error   6 passing (72ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/request' in 2.5s:
121 error $ mocha
121 error
121 error
121 error   Request
121 error     ✓ should call post with correct params
121 error     ✓ should call post with correct params with header
121 error     ✓ should call get with correct params
121 error     ✓ should call get with correct string params
121 error     ✓ should call get with no params
121 error
121 error
121 error   5 passing (46ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/tokens-from-req' in 2.0s:
121 error $ mocha
121 error
121 error
121 error   Tokens from req
121 error     ✓ should return the correct bearer token.
121 error     ✓ should return the correct basic token.
121 error     ✓ should return null if the scheme is incorrect.
121 error     ✓ should return null if authorization is missing.
121 error
121 error
121 error   4 passing (26ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/uuid' in 2.1s:
121 error $ mocha
121 error
121 error
121 error   UUID
121 error     ✓ should create a guid.
121 error
121 error
121 error   1 passing (20ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/validation' in 2.4s:
121 error $ mocha
121 error
121 error
121 error   Valid booleans
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional booleans
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Refinement functions
121 error     ✓ should not contain errors if value is not empty and passes refinement function
121 error
121 error   Invalid boolean
121 error     ✓ should contain one error if something other than a boolean is passed in
121 error
121 error   Invalid optional boolean
121 error     ✓ should contain one error if something other than a boolean is passed in, regardless of optional flag
121 error
121 error   Valid boolean that doesn't satisfy refinement
121 error     ✓ should contain one error if a boolean is passed in that doesn't satisfy the refinement function
121 error
121 error   Error message
121 error     ✓ should contain one error with the specified message if an invalid boolean is passed in
121 error     ✓ should throw an error with the thrown message if an invalid boolean is passed in and the refinement function throws
121 error     ✓ should throw an error with the passed in message if an invalid boolean is passed in with a message and the refinement function throws
121 error
121 error   Valid boolean array
121 error     ✓ should not contain errors if array has values that are booleans
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional boolean array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid boolean array
121 error     ✓ should contain one error if array has values that are not booleans
121 error
121 error   Invalid optional boolean array
121 error     ✓ should contain one error if array has values that are not booleans, regardless of optional flag
121 error
121 error   Valid functions
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional functions
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid function
121 error     ✓ should contain one error if something other than a func is passed in
121 error
121 error   Invalid optional function
121 error     ✓ should contain one error if something other than a function is passed in, regardless of optional flag
121 error
121 error   Valid function array
121 error     ✓ should not contain errors if array has values that are functions
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional function array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid function array
121 error     ✓ should contain one error if array has values that are not functions
121 error
121 error   Invalid optional function array
121 error     ✓ should contain one error if array has values that are not functions, regardless of optional flag
121 error
121 error   Valid numbers
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional numbers
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Refinement functions
121 error     ✓ should not contain errors if value is not empty and passes refinement function
121 error
121 error   Invalid number
121 error     ✓ should contain one error if something other than a number is passed in
121 error
121 error   Invalid optional number
121 error     ✓ should contain one error if something other than a number is passed in, regardless of optional flag
121 error
121 error   Valid number that doesn't satisfy refinement
121 error     ✓ should contain one error if a number is passed in that doesn't satisfy the refinement function
121 error
121 error   Error message
121 error     ✓ should contain one error with the specified message if an invalid number is passed in
121 error     ✓ should throw an error with the thrown message if an invalid number is passed in and the refinement function throws
121 error     ✓ should throw an error with the passed in message if an invalid number is passed in with a message and the refinement function throws
121 error
121 error   Valid number array
121 error     ✓ should not contain errors if array has values that are numbers
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional number array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid number array
121 error     ✓ should contain one error if array has values that are not numbers
121 error
121 error   Invalid optional number array
121 error     ✓ should contain one error if array has values that are not numbers, regardless of optional flag
121 error
121 error   Valid objects
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional objects
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Refinement functions
121 error     ✓ should not contain errors if value is not empty and passes refinement function
121 error
121 error   Invalid object
121 error     ✓ should contain one error if something other than a object is passed in
121 error
121 error   Invalid optional object
121 error     ✓ should contain one error if something other than a object is passed in, regardless of optional flag
121 error
121 error   Valid object that doesn't satisfy refinement
121 error     ✓ should contain one error if a object is passed in that doesn't satisfy the refinement function
121 error
121 error   Error message
121 error     ✓ should contain one error with the specified message if an invalid object is passed in
121 error     ✓ should throw an error with the thrown message if an invalid object is passed in and the refinement function throws
121 error     ✓ should throw an error with the passed in message if an invalid object is passed in with a message and the refinement function throws
121 error
121 error   Valid object array
121 error     ✓ should not contain errors if array has values that are objects
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional object array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid object array
121 error     ✓ should contain one error if array has values that are not objects
121 error
121 error   Invalid optional object array
121 error     ✓ should contain one error if array has values that are not objects, regardless of optional flag
121 error
121 error   Valid strings
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is empty
121 error
121 error   Optional strings
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Refinement functions
121 error     ✓ should not contain errors if value is not empty and passes refinement function
121 error
121 error   Invalid string
121 error     ✓ should contain one error if something other than a string is passed in
121 error
121 error   Invalid optional string
121 error     ✓ should contain one error if something other than a string is passed in, regardless of optional flag
121 error
121 error   Valid string that doesn't satisfy refinement
121 error     ✓ should contain one error if a string is passed in that doesn't satisfy the refinement function
121 error
121 error   Error message
121 error     ✓ should contain one error with the specified message if an invalid string is passed in
121 error     ✓ should throw an error with the thrown message if an invalid string is passed in without a message and the refinement function throws
121 error     ✓ should throw an error with the passed in message if an invalid string is passed in with a message and the refinement function throws
121 error
121 error   Valid string array
121 error     ✓ should not contain errors if array has values that are strings
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional string array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid string array
121 error     ✓ should contain one error if array has values that are not strings
121 error
121 error   Invalid optional string array
121 error     ✓ should contain one error if array has values that are not strings, regardless of optional flag
121 error
121 error
121 error   76 passing (282ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/command-middleware' in 2.4s:
121 error $ mocha
121 error
121 error
121 error   Command middleware
121 error     ✓ should call correctly
121 error
121 error
121 error   1 passing (44ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/event-store-middleware' in 2.2s:
121 error $ mocha
121 error
121 error
121 error   Command middleware
121 error     ✓ should call correctly
121 error
121 error
121 error   1 passing (53ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/logger' in 4.2s:
121 error $ mocha
121 error
121 error
121 error   Logging
121 error     ✓ it should call the logger
121 error
121 error   Logging
121 error     ✓ it should call the logger
121 error     ✓ it should call the logger and create a metadata object with the error in it
121 error     ✓ it should call the logger and attach the passed in error to the metadata
121 error
121 error   Logging
121 error     ✓ it should call the logger
121 error
121 error   Logging
121 error     ✓ it should call the logger
121 error
121 error   Logging
121 error     ✓ it should call the logger
121 error     ✓ it should call the logger and create a metadata object with the error in it
121 error     ✓ it should call the logger and attach the passed in error to the metadata
121 error
121 error
121 error   9 passing (144ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/jwt' in 3.0s:
121 error $ mocha
121 error
121 error
121 error   Create
121 error     ✓ it should create a jwt token if all variables are passed in
121 error
121 error   Validate
121 error     ✓ it should validate a valid jwt token
121 error     ✓ it should validate a valid jwt token with data
121 error     ✓ it should be invalid if the secret is wrong
121 error
121 error
121 error   4 passing (53ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/normalize-command' in 2.6s:
121 error $ mocha
121 error
121 error
121 error   Normalize command
121 error     ✓ should get called with expected params
121 error     ✓ should get called with expected params and passed in command
121 error     ✓ should get called with expected params
121 error
121 error
121 error   3 passing (28ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/event-store-js' in 3.0s:
121 error $ mocha --recursive
121 error
121 error
121 error   Event store
121 error     ✓ should call add with the right params
121 error     ✓ should call add with the right params and optionals left out
121 error     ✓ should call aggregate with the right params
121 error
121 error
121 error   3 passing (77ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/operation-js' in 3.1s:
121 error $ mocha --recursive
121 error
121 error
121 error   Operation
121 error     ✓ should call post with the correct params
121 error     ✓ should call get with the correct params
121 error
121 error
121 error   2 passing (60ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/create-event' in 3.4s:
121 error $ mocha
121 error
121 error
121 error   Create event
121 error     ✓ should get called with expected params
121 error     ✓ should get called with expected params if root is missin
121 error     ✓ should get called with expected params if authorized is missing
121 error     ✓ should get called with expected params if context is missing
121 error
121 error
121 error   4 passing (51ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/validator' in 4.4s:
121 error $ mocha
121 error
121 error
121 error   Valid booleans
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional booleans
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid boolean
121 error     ✓ should contain one error if something other than a boolean is passed in
121 error
121 error   Invalid optional boolean
121 error     ✓ should contain one error if something other than a boolean is passed in, regardless of optional flag
121 error
121 error   Valid boolean array
121 error     ✓ should not contain errors if array has values that are booleans
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional boolean array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid boolean array
121 error     ✓ should contain one error if array has values that are not booleans
121 error
121 error   Invalid optional boolean array
121 error     ✓ should contain one error if array has values that are not booleans, regardless of optional flag
121 error
121 error   Valid buffer
121 error     ✓ should not contain errors if value is a buffer
121 error
121 error   Optional buffers
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid buffer
121 error     ✓ should contain one error if something other than a buffer is passed in
121 error
121 error   Invalid optional buffer
121 error     ✓ should contain one error if something other than a buffer is passed in, regardless of optional flag
121 error
121 error   Valid country code
121 error     ✓ should not contain errors if value is a country code (47ms)
121 error
121 error   Optional buffers
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid buffer
121 error     ✓ should contain one error if something other than a country code is passed in
121 error
121 error   Invalid optional country code
121 error     ✓ should contain one error if something other than a country code is passed in, regardless of optional flag
121 error
121 error   Valid date components
121 error     ✓ should not contain errors if the data components are formatted correctly
121 error
121 error   Invalid date components
121 error     ✓ should contain one error if a date component is missing
121 error
121 error   Valid date
121 error     ✓ should not contain errors if the number is within range
121 error
121 error   Invalid date
121 error     ✓ should contain one error if the number is out of range
121 error
121 error   Valid day
121 error     ✓ should not contain errors if the number is within range
121 error
121 error   Invalid day
121 error     ✓ should contain one error if the number is out of range
121 error
121 error   Valid date time range
121 error     ✓ should not contain errors if the number is within range
121 error
121 error   Invalid date time range
121 error     ✓ should contain one error if the number is out of range
121 error
121 error   Valid email
121 error     ✓ should not contain errors if the email is formatted correctly (66ms)
121 error
121 error   Invalid email
121 error     ✓ should contain one error if the email isn't formatted correctly
121 error
121 error   Errors exist
121 error     ✓ should return the first error that is found
121 error     ✓ should return an error if present
121 error     ✓ should return an error if a message present
121 error
121 error   No errors
121 error     ✓ should return null if no errors exits
121 error
121 error   Errors exist
121 error     ✓ should return the first error that is found
121 error
121 error   No errors
121 error     ✓ should return null if no errors exits
121 error
121 error   Valid functions
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional functions
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid function
121 error     ✓ should contain one error if something other than a func is passed in
121 error
121 error   Invalid optional function
121 error     ✓ should contain one error if something other than a function is passed in, regardless of optional flag
121 error
121 error   Valid function array
121 error     ✓ should not contain errors if array has values that are functions
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional function array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid function array
121 error     ✓ should contain one error if array has values that are not functions
121 error
121 error   Invalid optional function array
121 error     ✓ should contain one error if array has values that are not functions, regardless of optional flag
121 error
121 error   Valid location
121 error     ✓ should not contain errors if the location is formatted correctly
121 error
121 error   Valid medium strings
121 error     ✓ should not contain errors if the password is formatted correctly
121 error
121 error   Invalid medium strings
121 error     ✓ should contain one error if the string is too long
121 error
121 error   Valid medium strings
121 error     ✓ should not contain errors if the password is formatted correctly
121 error
121 error   Invalid medium strings
121 error     ✓ should contain one error if the string is too long
121 error
121 error   Valid month
121 error     ✓ should not contain errors if the number is within range
121 error
121 error   Invalid month
121 error     ✓ should contain one error if the number is out of range
121 error
121 error   Valid name
121 error     ✓ should not contain errors if the name is formatted correctly
121 error
121 error   Invalid name
121 error     ✓ should contain one error if a name is missing
121 error
121 error   Valid numbers
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional numbers
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid number
121 error     ✓ should contain one error if something other than a number is passed in
121 error
121 error   Invalid optional number
121 error     ✓ should contain one error if something other than a number is passed in, regardless of optional flag
121 error
121 error   Valid number array
121 error     ✓ should not contain errors if array has values that are numbers
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional number array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid number array
121 error     ✓ should contain one error if array has values that are not numbers
121 error
121 error   Invalid optional number array
121 error     ✓ should contain one error if array has values that are not numbers, regardless of optional flag
121 error
121 error   Valid range
121 error     ✓ should not contain errors if the number is in range
121 error     ✓ should not contain errors if the number is the lower bound
121 error     ✓ should not contain errors if the number is the upper bound
121 error
121 error   Optional range
121 error     ✓ should not contain errors if the value is null
121 error
121 error   Invalid range
121 error     ✓ should contain one error if the number is too large
121 error     ✓ should contain one error if the number is too small
121 error     ✓ should contain one error if the number is invalid, regardless of the optional flag
121 error
121 error   Valid numbers equal
121 error     ✓ should not contain errors if the two numbers are the same
121 error
121 error   Invalid numbers equal
121 error     ✓ should contain one error if the numbers do not equal
121 error
121 error   Valid numeric
121 error     ✓ should not contain errors if the numeric is formatted correctly
121 error
121 error   Invalid numeric
121 error     ✓ should contain one error if the value contains something other than a number
121 error
121 error   Valid objects
121 error     ✓ should not contain errors if value is not empty
121 error
121 error   Optional objects
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid object
121 error     ✓ should contain one error if something other than a object is passed in
121 error
121 error   Invalid optional object
121 error     ✓ should contain one error if something other than a object is passed in, regardless of optional flag
121 error
121 error   Valid object array
121 error     ✓ should not contain errors if array has values that are objects
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional object array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid object array
121 error     ✓ should contain one error if array has values that are not objects
121 error
121 error   Invalid optional object array
121 error     ✓ should contain one error if array has values that are not objects, regardless of optional flag
121 error
121 error   Valid passwords
121 error     ✓ should not contain errors if the password is formatted correctly
121 error
121 error   Invalid passwords
121 error     ✓ should contain one error if the value is less than the minimum length
121 error     ✓ should contain one error if the value is greater than the maximum length
121 error     ✓ should contain one error if the value has no symbol
121 error     ✓ should contain one error if the value has no number
121 error     ✓ should contain one error if the value has no letter
121 error     ✓ should contain one error if the value has invalid symbols
121 error
121 error   Valid percent
121 error     ✓ should not contain errors if the number is within range
121 error
121 error   Invalid percent
121 error     ✓ should contain one error if the number is out of range
121 error
121 error   Valid email
121 error     ✓ should not contain errors if the email is formatted correctly (77ms)
121 error
121 error   Invalid phone number
121 error     ✓ should contain one error if the phone number isn't formatted correctly
121 error
121 error   Valid positive number
121 error     ✓ should not contain errors if the number is positive
121 error
121 error   Invalid positive
121 error     ✓ should contain one error if the number is negative
121 error
121 error   Valid positive number
121 error     ✓ should not contain errors if the number is within range
121 error
121 error   Invalid positive number
121 error     ✓ should contain one error if the number is out of range
121 error
121 error   Valid short strings
121 error     ✓ should not contain errors if the password is formatted correctly
121 error
121 error   Invalid short strings
121 error     ✓ should contain one error if the string is too long
121 error
121 error   Valid strings
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is empty
121 error
121 error   Optional strings
121 error     ✓ should not contain errors if value is not empty
121 error     ✓ should not contain errors if value is null
121 error
121 error   Max length strings
121 error     ✓ should contain one error if the maxLength is violated.
121 error     ✓ should contain errors if maxLength is violated with optional
121 error
121 error   Custom fn strings
121 error     ✓ should contain one error if the fn is violated.
121 error
121 error   Empty strings
121 error     ✓ should contain one error if the empty string flag violated.
121 error     ✓ should contain one error if the empty string flag violated.
121 error
121 error   Invalid string
121 error     ✓ should contain one error if something other than a string is passed in
121 error
121 error   Invalid optional string
121 error     ✓ should contain one error if something other than a string is passed in, regardless of optional flag
121 error
121 error   Valid string array
121 error     ✓ should not contain errors if array has values that are strings
121 error     ✓ should not contain errors if array is empty
121 error
121 error   Optional string array
121 error     ✓ should not contain errors if value is not valid, regardless of optional flag
121 error     ✓ should not contain errors if value is null
121 error
121 error   Invalid string array
121 error     ✓ should contain one error if array has values that are not strings
121 error
121 error   Invalid optional string array
121 error     ✓ should contain one error if array has values that are not strings, regardless of optional flag
121 error
121 error   Valid year
121 error     ✓ should not contain errors if the number is within range
121 error
121 error   Invalid year
121 error     ✓ should contain one error if the number is out of range
121 error
121 error
121 error   126 passing (564ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/authorize' in 4.0s:
121 error $ mocha
121 error
121 error
121 error   Authorize
121 error     ✓ should authorize all wildcards
121 error     ✓ should authorize with no domain
121 error     ✓ should authorize with matching scope
121 error     ✓ should authorize with multiple matching scopes
121 error     ✓ should authorize without priviledges
121 error     ✓ should authorize all wildcards with no token and not strict
121 error     ✓ should not authorize if theres a mismatch in priviledges
121 error     ✓ should not authorize if theres a mismatch in root
121 error     ✓ should not authorize if theres a mismatch in domain
121 error     ✓ should not authorize if theres a mismatch in service
121 error     ✓ should not authorize if theres a mismatch in network
121 error     ✓ should not authorize if there is no token
121 error
121 error
121 error   12 passing (74ms)
121 error
121 error lerna info run Ran npm script 'test' in '@sustainers/authorize-command' in 3.3s:
121 error $ mocha
121 error
121 error
121 error   Authorize command
121 error     ✓ should authorize all wildcards
121 error     ✓ should authorize with matching scope
121 error     ✓ should authorize with multiple matching scopes
121 error     ✓ should authorize without priviledges
121 error     ✓ should authorize all wildcards with no token and not strict
121 error     ✓ should not authorize if theres a mismatch in priviledges
121 error     ✓ should not authorize if theres a mismatch in root
121 error     ✓ should not authorize if theres a mismatch in domain
121 error     ✓ should not authorize if theres a mismatch in service
121 error     ✓ should not authorize if theres a mismatch in network
121 error     ✓ should not authorize if there are no token
121 error     ✓ should not authorize if there are no token
121 error
121 error
121 error   12 passing (44ms)
121 error
121 error lerna ERR! yarn run test exited 1 in '@sustainers/issue-command-js'
121 error lerna ERR! yarn run test stdout:
121 error $ mocha --recursive
121 error info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
121 error
121 error lerna ERR! yarn run test stderr:
121 error warning package.json: No license field
121 error /Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/node_modules/yargs/yargs.js:1163
121 error       else throw err
121 error            ^
121 error
121 error Error: Cannot find module '@sustainers/operation'
121 error     at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)
121 error     at Function.Module._load (internal/modules/cjs/loader.js:562:25)
121 error     at Module.require (internal/modules/cjs/loader.js:690:17)
121 error     at require (internal/modules/cjs/helpers.js:25:18)
121 error     at Object.<anonymous> (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/libraries/issue_command/js/index.js:3:19)
121 error     at Module._compile (internal/modules/cjs/loader.js:776:30)
121 error     at Object.Module._extensions..js (internal/modules/cjs/loader.js:787:10)
121 error     at Module.load (internal/modules/cjs/loader.js:653:32)
121 error     at tryModuleLoad (internal/modules/cjs/loader.js:593:12)
121 error     at Function.Module._load (internal/modules/cjs/loader.js:585:3)
121 error     at Module.require (internal/modules/cjs/loader.js:690:17)
121 error     at require (internal/modules/cjs/helpers.js:25:18)
121 error     at Object.<anonymous> (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/libraries/issue_command/js/test/index.js:8:22)
121 error     at Module._compile (internal/modules/cjs/loader.js:776:30)
121 error     at Object.Module._extensions..js (internal/modules/cjs/loader.js:787:10)
121 error     at Module.load (internal/modules/cjs/loader.js:653:32)
121 error     at tryModuleLoad (internal/modules/cjs/loader.js:593:12)
121 error     at Function.Module._load (internal/modules/cjs/loader.js:585:3)
121 error     at Module.require (internal/modules/cjs/loader.js:690:17)
121 error     at require (internal/modules/cjs/helpers.js:25:18)
121 error     at /Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/lib/mocha.js:334:36
121 error     at Array.forEach (<anonymous>)
121 error     at Mocha.loadFiles (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/lib/mocha.js:331:14)
121 error     at Mocha.run (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/lib/mocha.js:811:10)
121 error     at Object.exports.singleRun (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/lib/cli/run-helpers.js:108:16)
121 error     at exports.runMocha (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/lib/cli/run-helpers.js:142:13)
121 error     at Object.exports.handler.argv [as handler] (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/lib/cli/run.js:292:3)
121 error     at Object.runCommand (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/node_modules/yargs/lib/command.js:242:26)
121 error     at Object.parseArgs [as _parseArgs] (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/node_modules/yargs/yargs.js:1104:24)
121 error     at Object.parse (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/node_modules/yargs/yargs.js:566:25)
121 error     at Object.exports.main (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/lib/cli/cli.js:68:6)
121 error     at Object.<anonymous> (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/mocha/bin/mocha:154:29)
121 error     at Module._compile (internal/modules/cjs/loader.js:776:30)
121 error     at Object.Module._extensions..js (internal/modules/cjs/loader.js:787:10)
121 error     at Module.load (internal/modules/cjs/loader.js:653:32)
121 error     at tryModuleLoad (internal/modules/cjs/loader.js:593:12)
121 error     at Function.Module._load (internal/modules/cjs/loader.js:585:3)
121 error     at Function.Module.runMain (internal/modules/cjs/loader.js:829:12)
121 error     at startup (internal/bootstrap/node.js:283:19)
121 error     at bootstrapNodeJSCore (internal/bootstrap/node.js:622:3)
121 error error Command failed with exit code 1.
121 error
121 error lerna ERR! yarn run test exited 1 in '@sustainers/issue-command-js'
121 error lerna WARN complete Waiting for 3 child processes to exit. CTRL-C to exit immediately.
121 error error Command failed with exit code 1.
121 error info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
121 error husky > pre-commit hook failed (add --no-verify to bypass)
121 error
121 error     at makeError (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/execa/index.js:174:9)
121 error     at Promise.all.then.arr (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/execa/index.js:278:16)
