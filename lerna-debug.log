0 silly argv { _: [ 'version' ],
0 silly argv   lernaVersion: '3.16.4',
0 silly argv   '$0':
0 silly argv    '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin/lerna',
0 silly argv   bump: 'patch' }
1 notice cli v3.16.4
2 verbose rootPath /Users/joao/Documents/repos/sustainer-network/sustainers-market-js
3 info versioning independent
4 silly isAnythingCommitted
5 verbose isAnythingCommitted 1
6 silly currentBranch
7 verbose currentBranch master
8 silly remoteBranchExists
9 silly isBehindUpstream
10 silly isBehindUpstream master is behind origin/master by 0 commit(s) and ahead by 1
11 silly hasTags
12 verbose hasTags true
13 silly git-describe.sync "@sustainers/command-js@0.0.1-1-g5081bfb" => {"lastTagName":"@sustainers/command-js@0.0.1","lastVersion":"0.0.1","refCount":"1","sha":"5081bfb","isDirty":false}
14 info Looking for changed packages since @sustainers/command-js@0.0.1
15 info ignoring diff in paths matching [ '*.md' ]
16 silly checking diff packages/consts
17 silly no diff found in @sustainers/consts
18 silly checking diff packages/errors
19 silly no diff found in @sustainers/errors
20 silly checking diff packages/exec/domains/auth_token/command_handlers/create/http
21 silly no diff found in @sustainers/create-auth-token-command-handler
22 silly checking diff packages/exec/event_store/add/http
23 silly no diff found in @sustainers/event-store-add-service
24 silly checking diff packages/exec/event_store/aggregate/http
25 silly no diff found in @sustainers/event-store-aggregate-service
26 silly checking diff packages/exec/gateways/core/http
27 silly no diff found in @sustainers/core-gateway
28 silly checking diff packages/gcp/event_bus
29 silly no diff found in @sustainers/event-bus
30 silly checking diff packages/gcp/event_store
31 silly no diff found in @sustainers/event-store
32 silly checking diff packages/gcp/kms
33 silly no diff found in @sustainers/gcp-kms
34 silly checking diff packages/gcp/log_transports
35 silly no diff found in @sustainers/gcp-log-transports
36 silly checking diff packages/gcp/token
37 silly no diff found in @sustainers/gcp-token
38 silly checking diff packages/lambda
39 silly no diff found in @sustainers/lambda
40 silly checking diff packages/lib/array_intersection
41 silly no diff found in @sustainers/array-intersection
42 silly checking diff packages/lib/authenticate
43 silly no diff found in @sustainers/authenticate
44 silly checking diff packages/lib/authorize
45 silly no diff found in @sustainers/authorize
46 silly checking diff packages/lib/authorize_command
47 silly no diff found in @sustainers/authorize-command
48 silly checking diff packages/lib/clean_command
49 silly no diff found in @sustainers/clean-command
50 silly checking diff packages/lib/command_info_from_req
51 silly no diff found in @sustainers/command-info-from-req
52 silly checking diff packages/lib/create_event
53 silly no diff found in @sustainers/create-event
54 silly checking diff packages/lib/datetime
55 silly no diff found in @sustainers/datetime
56 silly checking diff packages/lib/email_validator
57 silly no diff found in @sustainers/email-validator
58 silly checking diff packages/lib/jwt
59 silly no diff found in @sustainers/jwt
60 silly checking diff packages/lib/nonce
61 silly no diff found in @sustainers/nonce
62 silly checking diff packages/lib/normalize_command
63 silly no diff found in @sustainers/normalize-command
64 silly checking diff packages/lib/phone_number
65 silly no diff found in @sustainers/phone-number
66 silly checking diff packages/lib/request
67 silly no diff found in @sustainers/request
68 silly checking diff packages/lib/tokens_from_req
69 silly no diff found in @sustainers/tokens-from-req
70 silly checking diff packages/lib/uuid
71 silly no diff found in @sustainers/uuid
72 silly checking diff packages/lib/validate_command
73 silly no diff found in @sustainers/validate-command
74 silly checking diff packages/lib/validation
75 silly no diff found in @sustainers/validation
76 silly checking diff packages/lib/validator
77 silly no diff found in @sustainers/validator
78 silly checking diff packages/libraries/command
79 silly no diff found in @sustainers/command-js
80 silly checking diff packages/libraries/event-store
81 silly found diff in packages/libraries/event-store/deps.js
81 silly found diff in packages/libraries/event-store/index.js
81 silly found diff in packages/libraries/event-store/package.json
81 silly found diff in packages/libraries/event-store/test/index.js
82 verbose filtered diff [ 'packages/libraries/event-store/deps.js',
82 verbose filtered diff   'packages/libraries/event-store/index.js',
82 verbose filtered diff   'packages/libraries/event-store/package.json',
82 verbose filtered diff   'packages/libraries/event-store/test/index.js' ]
83 silly checking diff packages/libraries/get_views
84 silly no diff found in @sustainers/get-views-js
85 silly checking diff packages/libraries/operation
86 silly no diff found in @sustainers/operation-js
87 silly checking diff packages/libraries/view_store
88 silly found diff in packages/libraries/view_store/index.js
88 silly found diff in packages/libraries/view_store/test/index.js
89 verbose filtered diff [ 'packages/libraries/view_store/index.js',
89 verbose filtered diff   'packages/libraries/view_store/test/index.js' ]
90 silly checking diff packages/logging/logger
91 silly no diff found in @sustainers/logger
92 silly checking diff packages/middleware/authentication
93 silly no diff found in @sustainers/authentication-middleware
94 silly checking diff packages/middleware/authorization
95 silly no diff found in @sustainers/authorization-middleware
96 silly checking diff packages/middleware/cors
97 silly no diff found in @sustainers/cors-middleware
98 silly checking diff packages/middleware/error
99 silly no diff found in @sustainers/error-middleware
100 silly checking diff packages/middleware/express
101 silly no diff found in @sustainers/express-middleware
102 verbose updated @sustainers/event-store-js
103 verbose updated @sustainers/view-store-js
104 verbose git-describe undefined => "@sustainers/command-js@0.0.1-1-g5081bfb"
105 silly git-describe parsed => {"lastTagName":"@sustainers/command-js@0.0.1","lastVersion":"0.0.1","refCount":"1","sha":"5081bfb","isDirty":false}
106 info execute Skipping releases
107 silly lifecycle "preversion" starting in "@sustainer-network/js"
108 info lifecycle @sustainer-network/js@0.0.0~preversion: @sustainer-network/js@0.0.0
109 warn lifecycle The node binary used for scripts is /var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/yarn--1568706622402-0.10597502186924856/node but npm is using /Users/joao/.nvm/versions/node/v10.16.0/bin/node itself. Use the `--scripts-prepend-node-path` option to include the path for the node binary npm was executed with.
110 verbose lifecycle @sustainer-network/js@0.0.0~preversion: unsafe-perm in lifecycle true
111 verbose lifecycle @sustainer-network/js@0.0.0~preversion: PATH: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/npm-lifecycle/node-gyp-bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/yarn--1568706622402-0.10597502186924856:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.config/yarn/link/node_modules/.bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.nvm/versions/node/v10.16.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools
112 verbose lifecycle @sustainer-network/js@0.0.0~preversion: CWD: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js
113 silly lifecycle @sustainer-network/js@0.0.0~preversion: Args: [ '-c', 'yarn test' ]
114 silly lifecycle @sustainer-network/js@0.0.0~preversion: Returned: code: 0  signal: null
115 silly lifecycle "preversion" finished in "@sustainer-network/js"
116 silly lifecycle No script for "preversion" in "@sustainers/event-store-js", continuing
117 silly lifecycle No script for "preversion" in "@sustainers/view-store-js", continuing
118 silly lifecycle No script for "version" in "@sustainers/event-store-js", continuing
119 silly lifecycle No script for "version" in "@sustainers/view-store-js", continuing
120 silly lifecycle "version" starting in "@sustainer-network/js"
121 info lifecycle @sustainer-network/js@0.0.0~version: @sustainer-network/js@0.0.0
122 verbose lifecycle @sustainer-network/js@0.0.0~version: unsafe-perm in lifecycle true
123 verbose lifecycle @sustainer-network/js@0.0.0~version: PATH: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/npm-lifecycle/node-gyp-bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/yarn--1568706622402-0.10597502186924856:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.config/yarn/link/node_modules/.bin:/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/.bin:/Users/joao/.nvm/versions/node/v10.16.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin/node_modules/npm/bin/node-gyp-bin:/Users/joao/.nvm/versions/node/v10.16.0/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/joao/.google-cloud-sdk/bin:/Users/joao/.flutter_build/bin:/Users/joao/.yarn/bin:/Users/joao/.config/yarn/global/node_modules/.bin:/Developer/adt-bundle/sdk/tools:/Developer/adt-bundle/sdk/platform-tools
124 verbose lifecycle @sustainer-network/js@0.0.0~version: CWD: /Users/joao/Documents/repos/sustainer-network/sustainers-market-js
125 silly lifecycle @sustainer-network/js@0.0.0~version: Args: [ '-c', 'auto-changelog && git add CHANGELOG.md' ]
126 silly lifecycle @sustainer-network/js@0.0.0~version: Returned: code: 0  signal: null
127 silly lifecycle "version" finished in "@sustainer-network/js"
128 silly gitAdd [ '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/libraries/event-store/package.json',
128 silly gitAdd   '/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/packages/libraries/view_store/package.json' ]
129 silly gitCommit Publish
129 silly gitCommit
129 silly gitCommit  - @sustainers/event-store-js@0.0.5
129 silly gitCommit  - @sustainers/view-store-js@0.0.2
130 verbose git [ 'commit',
130 verbose git   '-F',
130 verbose git   '/private/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/d50be130-1ef0-46c5-beae-308ad5f0c35f/lerna-commit.txt' ]
131 error Error: Command failed: git commit -F /private/var/folders/td/1z2wysyx391gm5_235h7rvsm0000gn/T/d50be130-1ef0-46c5-beae-308ad5f0c35f/lerna-commit.txt
131 error
131 error Warning: Setting pre-commit script in package.json > scripts will be deprecated
131 error Please move it to husky.hooks in package.json, a .huskyrc file, or a husky.config.js file
131 error Or run ./node_modules/.bin/husky-upgrade for automatic update
131 error
131 error See https://github.com/typicode/husky for usage
131 error
131 error husky > pre-commit (node v10.16.0)
131 error $ lerna run test
131 error lerna notice cli v3.16.4
131 error lerna info versioning independent
131 error lerna info Executing command in 40 packages: "yarn run test"
131 error lerna info run Ran npm script 'test' in '@sustainers/consts' in 1.3s:
131 error $ echo 'no tests'
131 error no tests
131 error lerna info run Ran npm script 'test' in '@sustainers/event-bus' in 5.6s:
131 error $ mocha
131 error
131 error
131 error   Event bus
131 error     ✓ should call publish with the correct params
131 error     ✓ should call publish with the correct params and add a payload if missing
131 error
131 error
131 error   2 passing (139ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/array-intersection' in 4.8s:
131 error $ mocha
131 error
131 error
131 error   Intersection
131 error     ✓ should return the common items if one exist
131 error     ✓ should return the common items if multiple exist
131 error     ✓ should return an empty array if no common elements exist
131 error
131 error
131 error   3 passing (96ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/event-store' in 6.1s:
131 error $ mocha --recursive
131 error
131 error
131 error   Event store add
131 error     ✓ should call add with the correct params if table exists
131 error     ✓ should call add with the correct params if table does not exists
131 error
131 error   Event store hydrate
131 error     ✓ should call hydrate with the correct params if table exists
131 error     ✓ should call hydrate with the correct params if table does not exists
131 error     ✓ should call hydrate and throw error if needed
131 error     ✓ should call hydrate with the correct params and correct reducing if exists
131 error
131 error
131 error   6 passing (146ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/gcp-kms' in 7.5s:
131 error $ mocha --recursive --timeout=10000
131 error
131 error
131 error   Kms sign
131 error     ✓ should sign correctly (82ms)
131 error     ✓ should throw correctly
131 error
131 error   Kms verify
131 error     ✓ should throw correctly
131 error     ✓ should get the public key correctly
131 error     ✓ shouldn't call the service if the key has already been retrieved
131 error     ✓ should sign and verify correctly (1594ms)
131 error     ✓ should fail if messages dont match (383ms)
131 error
131 error
131 error   7 passing (2s)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/clean-command' in 2.5s:
131 error $ mocha
131 error
131 error
131 error   Clean command
131 error     ✓ should clean the request correctly
131 error     ✓ should add a payload
131 error
131 error
131 error   2 passing (22ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/command-info-from-req' in 2.2s:
131 error $ mocha
131 error
131 error
131 error   Command name from req host
131 error     ✓ should return the correct command name.
131 error     ✓ should return null if there are only three subdomains in the host.
131 error     ✓ should return null if the host is not formatted as expected.
131 error
131 error
131 error   3 passing (13ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/datetime' in 2.6s:
131 error $ mocha
131 error
131 error
131 error   Converts correctly
131 error     ✓ it should return correct components
131 error
131 error   Converts correctly
131 error     ✓ it should return correct components
131 error
131 error   Creates correctly
131 error     ✓ it should create a new moment that equals the passed in moment
131 error     ✓ it should edit the copy moment without affecting the first moment
131 error
131 error   Creates correctly
131 error     ✓ it should return a timestamp that equals now
131 error
131 error   Converts correctly
131 error     ✓ it should return a timestamp used to create the date
131 error
131 error   Converts correctly
131 error     ✓ it should return an expected string based on the utc timestamp
131 error
131 error   Creates correctly
131 error     ✓ it should return a moment that equals now
131 error
131 error   Converts correctly
131 error     ✓ it should return the correct moment
131 error
131 error   Converts correctly
131 error     ✓ it should return a moment with the same timestamp used to create it
131 error
131 error   Creates correctly
131 error     ✓ it should return a timestamp that equals now
131 error
131 error   Converts correctly
131 error     ✓ it should return the correct timestamp
131 error
131 error   Converts correctly
131 error     ✓ it should return a timestamp used to create the date
131 error
131 error   Converts correctly
131 error     ✓ it should return a timestamp used to create the moment
131 error
131 error   Converts correctly
131 error     ✓ it should return an expected string based on the utc timestamp
131 error
131 error
131 error   15 passing (79ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/email-validator' in 1.8s:
131 error $ mocha
131 error
131 error
131 error   Valid emails
131 error     ✓ should not throw when given a valid email
131 error
131 error   Invalid emails
131 error     ✓ should throw when given an invalid email
131 error
131 error
131 error   2 passing (54ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/nonce' in 1.8s:
131 error $ mocha
131 error
131 error
131 error   Create
131 error     ✓ it should create a unique nonce
131 error
131 error
131 error   1 passing (29ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/phone-number' in 1.9s:
131 error $ mocha
131 error
131 error
131 error   Valid numbers
131 error     ✓ should return an E164 formatted phone number, if the input is a valid phone number
131 error     ✓ should return an E164 formatted phone number, if the input is a valid phone number with seperator symbols
131 error     ✓ should return an E164 formatted phone number, if the input is a valid international phone number
131 error     ✓ should return an E164 formatted phone number, if the input is a valid international phone number with symbols
131 error
131 error   Invalid numbers
131 error     ✓ should return null if the input is not a valid phone number
131 error     ✓ should return null if the input is null
131 error     ✓ should return null if the input is empty
131 error
131 error
131 error   7 passing (70ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/request' in 1.9s:
131 error $ mocha
131 error
131 error
131 error   Request
131 error     ✓ should call post with correct params
131 error     ✓ should call post with correct params with header
131 error     ✓ should call put with correct params
131 error     ✓ should call delete with correct params
131 error     ✓ should call get with correct params
131 error     ✓ should call get with correct params and header
131 error     ✓ should call get with correct string params
131 error     ✓ should call get with no params
131 error
131 error
131 error   8 passing (61ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/tokens-from-req' in 1.6s:
131 error $ mocha
131 error
131 error
131 error   Tokens from req
131 error     ✓ should return the correct bearer token.
131 error     ✓ should return the correct cookie token.
131 error     ✓ should return the correct basic token.
131 error     ✓ should return the correct cookie token and authorization token.
131 error     ✓ should return null if the scheme is incorrect.
131 error     ✓ should return null if authorization is missing.
131 error
131 error
131 error   6 passing (27ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/uuid' in 2.0s:
131 error $ mocha
131 error
131 error
131 error   UUID
131 error     ✓ should create a guid.
131 error
131 error
131 error   1 passing (26ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/validation' in 3.1s:
131 error $ mocha
131 error
131 error
131 error   Valid booleans
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional booleans
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Refinement functions
131 error     ✓ should not contain errors if value is not empty and passes refinement function
131 error
131 error   Invalid boolean
131 error     ✓ should contain one error if something other than a boolean is passed in
131 error
131 error   Invalid optional boolean
131 error     ✓ should contain one error if something other than a boolean is passed in, regardless of optional flag
131 error
131 error   Valid boolean that doesn't satisfy refinement
131 error     ✓ should contain one error if a boolean is passed in that doesn't satisfy the refinement function
131 error
131 error   Error message
131 error     ✓ should contain one error with the specified message if an invalid boolean is passed in
131 error     ✓ should throw an error with the thrown message if an invalid boolean is passed in and the refinement function throws
131 error     ✓ should throw an error with the passed in message if an invalid boolean is passed in with a message and the refinement function throws
131 error
131 error   Valid boolean array
131 error     ✓ should not contain errors if array has values that are booleans
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional boolean array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid boolean array
131 error     ✓ should contain one error if array has values that are not booleans
131 error
131 error   Invalid optional boolean array
131 error     ✓ should contain one error if array has values that are not booleans, regardless of optional flag
131 error
131 error   Valid functions
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional functions
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid function
131 error     ✓ should contain one error if something other than a func is passed in
131 error
131 error   Invalid optional function
131 error     ✓ should contain one error if something other than a function is passed in, regardless of optional flag
131 error
131 error   Valid function array
131 error     ✓ should not contain errors if array has values that are functions
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional function array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid function array
131 error     ✓ should contain one error if array has values that are not functions
131 error
131 error   Invalid optional function array
131 error     ✓ should contain one error if array has values that are not functions, regardless of optional flag
131 error
131 error   Valid numbers
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional numbers
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Refinement functions
131 error     ✓ should not contain errors if value is not empty and passes refinement function
131 error
131 error   Invalid number
131 error     ✓ should contain one error if something other than a number is passed in
131 error
131 error   Invalid optional number
131 error     ✓ should contain one error if something other than a number is passed in, regardless of optional flag
131 error
131 error   Valid number that doesn't satisfy refinement
131 error     ✓ should contain one error if a number is passed in that doesn't satisfy the refinement function
131 error
131 error   Error message
131 error     ✓ should contain one error with the specified message if an invalid number is passed in
131 error     ✓ should throw an error with the thrown message if an invalid number is passed in and the refinement function throws
131 error     ✓ should throw an error with the passed in message if an invalid number is passed in with a message and the refinement function throws
131 error
131 error   Valid number array
131 error     ✓ should not contain errors if array has values that are numbers
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional number array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid number array
131 error     ✓ should contain one error if array has values that are not numbers
131 error
131 error   Invalid optional number array
131 error     ✓ should contain one error if array has values that are not numbers, regardless of optional flag
131 error
131 error   Valid objects
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional objects
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Refinement functions
131 error     ✓ should not contain errors if value is not empty and passes refinement function
131 error
131 error   Invalid object
131 error     ✓ should contain one error if something other than a object is passed in
131 error
131 error   Invalid optional object
131 error     ✓ should contain one error if something other than a object is passed in, regardless of optional flag
131 error
131 error   Valid object that doesn't satisfy refinement
131 error     ✓ should contain one error if a object is passed in that doesn't satisfy the refinement function
131 error
131 error   Error message
131 error     ✓ should contain one error with the specified message if an invalid object is passed in
131 error     ✓ should throw an error with the thrown message if an invalid object is passed in and the refinement function throws
131 error     ✓ should throw an error with the passed in message if an invalid object is passed in with a message and the refinement function throws
131 error
131 error   Valid object array
131 error     ✓ should not contain errors if array has values that are objects
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional object array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid object array
131 error     ✓ should contain one error if array has values that are not objects
131 error
131 error   Invalid optional object array
131 error     ✓ should contain one error if array has values that are not objects, regardless of optional flag
131 error
131 error   Valid strings
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is empty
131 error
131 error   Optional strings
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Refinement functions
131 error     ✓ should not contain errors if value is not empty and passes refinement function
131 error
131 error   Invalid string
131 error     ✓ should contain one error if something other than a string is passed in
131 error
131 error   Invalid optional string
131 error     ✓ should contain one error if something other than a string is passed in, regardless of optional flag
131 error
131 error   Valid string that doesn't satisfy refinement
131 error     ✓ should contain one error if a string is passed in that doesn't satisfy the refinement function
131 error
131 error   Error message
131 error     ✓ should contain one error with the specified message if an invalid string is passed in
131 error     ✓ should throw an error with the thrown message if an invalid string is passed in without a message and the refinement function throws
131 error     ✓ should throw an error with the passed in message if an invalid string is passed in with a message and the refinement function throws
131 error
131 error   Valid string array
131 error     ✓ should not contain errors if array has values that are strings
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional string array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid string array
131 error     ✓ should contain one error if array has values that are not strings
131 error
131 error   Invalid optional string array
131 error     ✓ should contain one error if array has values that are not strings, regardless of optional flag
131 error
131 error
131 error   76 passing (297ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/cors-middleware' in 4.4s:
131 error $ mocha
131 error
131 error
131 error   Cors middleware
131 error     ✓ should call correctly (71ms)
131 error     ✓ should call correctly if credentials is true
131 error
131 error   Whitelist
131 error     ✓ should call correctly
131 error     ✓ should call correctly if origin is undefined
131 error     ✓ should call correctly if incorrect
131 error
131 error
131 error   5 passing (99ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/express-middleware' in 4.1s:
131 error $ mocha
131 error
131 error
131 error   Middleware
131 error     ✓ should call correctly
131 error
131 error
131 error   1 passing (39ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/logger' in 5.7s:
131 error $ mocha
131 error
131 error
131 error   Logging
131 error     ✓ it should call the logger (90ms)
131 error
131 error   Logging
131 error     ✓ it should call the logger
131 error     ✓ it should call the logger and create a metadata object with the error in it
131 error     ✓ it should call the logger and attach the passed in error to the metadata
131 error
131 error   Logging
131 error     ✓ it should call the logger
131 error
131 error   Logging
131 error     ✓ it should call the logger
131 error
131 error   Logging
131 error     ✓ it should call the logger
131 error     ✓ it should call the logger and create a metadata object with the error in it
131 error     ✓ it should call the logger and attach the passed in error to the metadata
131 error
131 error
131 error   9 passing (226ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/jwt' in 3.6s:
131 error $ mocha
131 error
131 error
131 error   Create
131 error     ✓ it should create a jwt token if all variables are passed in
131 error
131 error   Validate
131 error     ✓ it should validate a valid jwt token
131 error     ✓ it should validate a valid jwt token with data
131 error     ✓ it should be invalid if the secret is wrong
131 error
131 error
131 error   4 passing (30ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/normalize-command' in 2.1s:
131 error $ mocha
131 error
131 error
131 error   Normalize command
131 error     ✓ should get called with expected params
131 error     ✓ should get called with expected params and passed in command
131 error     ✓ should get called with expected params
131 error
131 error
131 error   3 passing (26ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/gcp-token' in 2.2s:
131 error $ mocha
131 error
131 error
131 error   Gcp token
131 error     ✓ should call correctly
131 error
131 error
131 error   1 passing (25ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/operation-js' in 2.2s:
131 error $ mocha --recursive
131 error
131 error
131 error   Operation
131 error     ✓ should call post with the correct params
131 error     ✓ should call post with the correct params with path
131 error     ✓ should call get with the correct params
131 error     ✓ should call put with the correct params
131 error     ✓ should call put with the correct params with path
131 error     ✓ should call delete with the correct params
131 error
131 error
131 error   6 passing (53ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/create-event' in 1.8s:
131 error $ mocha
131 error
131 error
131 error   Create event
131 error     ✓ should get called with expected params
131 error     ✓ should get called with expected params if root is missin
131 error     ✓ should get called with expected params if authorized is missing
131 error     ✓ should get called with expected params if context is missing
131 error
131 error
131 error   4 passing (25ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/validator' in 2.1s:
131 error $ mocha
131 error
131 error
131 error   Valid booleans
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional booleans
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid boolean
131 error     ✓ should contain one error if something other than a boolean is passed in
131 error
131 error   Invalid optional boolean
131 error     ✓ should contain one error if something other than a boolean is passed in, regardless of optional flag
131 error
131 error   Valid boolean array
131 error     ✓ should not contain errors if array has values that are booleans
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional boolean array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid boolean array
131 error     ✓ should contain one error if array has values that are not booleans
131 error
131 error   Invalid optional boolean array
131 error     ✓ should contain one error if array has values that are not booleans, regardless of optional flag
131 error
131 error   Valid buffer
131 error     ✓ should not contain errors if value is a buffer
131 error
131 error   Optional buffers
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid buffer
131 error     ✓ should contain one error if something other than a buffer is passed in
131 error
131 error   Invalid optional buffer
131 error     ✓ should contain one error if something other than a buffer is passed in, regardless of optional flag
131 error
131 error   Valid country code
131 error     ✓ should not contain errors if value is a country code
131 error
131 error   Optional buffers
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid buffer
131 error     ✓ should contain one error if something other than a country code is passed in
131 error
131 error   Invalid optional country code
131 error     ✓ should contain one error if something other than a country code is passed in, regardless of optional flag
131 error
131 error   Valid date components
131 error     ✓ should not contain errors if the data components are formatted correctly
131 error
131 error   Invalid date components
131 error     ✓ should contain one error if a date component is missing
131 error
131 error   Valid date
131 error     ✓ should not contain errors if the number is within range
131 error
131 error   Invalid date
131 error     ✓ should contain one error if the number is out of range
131 error
131 error   Valid day
131 error     ✓ should not contain errors if the number is within range
131 error
131 error   Invalid day
131 error     ✓ should contain one error if the number is out of range
131 error
131 error   Valid date time range
131 error     ✓ should not contain errors if the number is within range
131 error
131 error   Invalid date time range
131 error     ✓ should contain one error if the number is out of range
131 error
131 error   Valid email
131 error     ✓ should not contain errors if the email is formatted correctly (95ms)
131 error
131 error   Invalid email
131 error     ✓ should contain one error if the email isn't formatted correctly
131 error
131 error   Errors exist
131 error     ✓ should return the first error that is found
131 error     ✓ should return an error if present
131 error     ✓ should return an error if a message present
131 error
131 error   No errors
131 error     ✓ should return null if no errors exits
131 error
131 error   Errors exist
131 error     ✓ should return the first error that is found
131 error
131 error   No errors
131 error     ✓ should return null if no errors exits
131 error
131 error   Valid functions
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional functions
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid function
131 error     ✓ should contain one error if something other than a func is passed in
131 error
131 error   Invalid optional function
131 error     ✓ should contain one error if something other than a function is passed in, regardless of optional flag
131 error
131 error   Valid function array
131 error     ✓ should not contain errors if array has values that are functions
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional function array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid function array
131 error     ✓ should contain one error if array has values that are not functions
131 error
131 error   Invalid optional function array
131 error     ✓ should contain one error if array has values that are not functions, regardless of optional flag
131 error
131 error   Valid location
131 error     ✓ should not contain errors if the location is formatted correctly
131 error
131 error   Valid month
131 error     ✓ should not contain errors if the number is within range
131 error
131 error   Invalid month
131 error     ✓ should contain one error if the number is out of range
131 error
131 error   Valid name
131 error     ✓ should not contain errors if the name is formatted correctly
131 error
131 error   Invalid name
131 error     ✓ should contain one error if a name is missing
131 error
131 error   Valid numbers
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional numbers
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid number
131 error     ✓ should contain one error if something other than a number is passed in
131 error
131 error   Invalid optional number
131 error     ✓ should contain one error if something other than a number is passed in, regardless of optional flag
131 error
131 error   Valid number array
131 error     ✓ should not contain errors if array has values that are numbers
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional number array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid number array
131 error     ✓ should contain one error if array has values that are not numbers
131 error
131 error   Invalid optional number array
131 error     ✓ should contain one error if array has values that are not numbers, regardless of optional flag
131 error
131 error   Valid range
131 error     ✓ should not contain errors if the number is in range
131 error     ✓ should not contain errors if the number is the lower bound
131 error     ✓ should not contain errors if the number is the upper bound
131 error
131 error   Optional range
131 error     ✓ should not contain errors if the value is null
131 error
131 error   Invalid range
131 error     ✓ should contain one error if the number is too large
131 error     ✓ should contain one error if the number is too small
131 error     ✓ should contain one error if the number is invalid, regardless of the optional flag
131 error
131 error   Valid numbers equal
131 error     ✓ should not contain errors if the two numbers are the same
131 error
131 error   Invalid numbers equal
131 error     ✓ should contain one error if the numbers do not equal
131 error
131 error   Valid numeric
131 error     ✓ should not contain errors if the numeric is formatted correctly
131 error
131 error   Invalid numeric
131 error     ✓ should contain one error if the value contains something other than a number
131 error
131 error   Valid objects
131 error     ✓ should not contain errors if value is not empty
131 error
131 error   Optional objects
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid object
131 error     ✓ should contain one error if something other than a object is passed in
131 error
131 error   Invalid optional object
131 error     ✓ should contain one error if something other than a object is passed in, regardless of optional flag
131 error
131 error   Valid object array
131 error     ✓ should not contain errors if array has values that are objects
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional object array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid object array
131 error     ✓ should contain one error if array has values that are not objects
131 error
131 error   Invalid optional object array
131 error     ✓ should contain one error if array has values that are not objects, regardless of optional flag
131 error
131 error   Valid passwords
131 error     ✓ should not contain errors if the password is formatted correctly
131 error
131 error   Invalid passwords
131 error     ✓ should contain one error if the value is less than the minimum length
131 error     ✓ should contain one error if the value is greater than the maximum length
131 error     ✓ should contain one error if the value has no symbol
131 error     ✓ should contain one error if the value has no number
131 error     ✓ should contain one error if the value has no letter
131 error     ✓ should contain one error if the value has invalid symbols
131 error
131 error   Valid percent
131 error     ✓ should not contain errors if the number is within range
131 error
131 error   Invalid percent
131 error     ✓ should contain one error if the number is out of range
131 error
131 error   Valid email
131 error     ✓ should not contain errors if the email is formatted correctly
131 error
131 error   Invalid phone number
131 error     ✓ should contain one error if the phone number isn't formatted correctly
131 error
131 error   Valid positive number
131 error     ✓ should not contain errors if the number is positive
131 error
131 error   Invalid positive
131 error     ✓ should contain one error if the number is negative
131 error
131 error   Valid positive number
131 error     ✓ should not contain errors if the number is within range
131 error
131 error   Invalid positive number
131 error     ✓ should contain one error if the number is out of range
131 error
131 error   Valid strings
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is empty
131 error
131 error   Optional strings
131 error     ✓ should not contain errors if value is not empty
131 error     ✓ should not contain errors if value is null
131 error
131 error   Max length strings
131 error     ✓ should contain one error if the maxLength is violated.
131 error     ✓ should contain errors if maxLength is violated with optional
131 error
131 error   Custom fn strings
131 error     ✓ should contain one error if the fn is violated.
131 error
131 error   Empty strings
131 error     ✓ should contain one error if the empty string flag violated.
131 error     ✓ should contain one error if the empty string flag violated.
131 error
131 error   Invalid string
131 error     ✓ should contain one error if something other than a string is passed in
131 error
131 error   Invalid optional string
131 error     ✓ should contain one error if something other than a string is passed in, regardless of optional flag
131 error
131 error   Valid string array
131 error     ✓ should not contain errors if array has values that are strings
131 error     ✓ should not contain errors if array is empty
131 error
131 error   Optional string array
131 error     ✓ should not contain errors if value is not valid, regardless of optional flag
131 error     ✓ should not contain errors if value is null
131 error
131 error   Invalid string array
131 error     ✓ should contain one error if array has values that are not strings
131 error
131 error   Invalid optional string array
131 error     ✓ should contain one error if array has values that are not strings, regardless of optional flag
131 error
131 error   Valid year
131 error     ✓ should not contain errors if the number is within range
131 error
131 error   Invalid year
131 error     ✓ should contain one error if the number is out of range
131 error
131 error
131 error   120 passing (330ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/authenticate' in 1.7s:
131 error $ mocha
131 error
131 error
131 error   Authorize
131 error     ✓ should authentiate
131 error     ✓ should authenticate with cookie token
131 error     ✓ should not authorize if there is no token
131 error     ✓ should authorize with no token and not strict
131 error
131 error
131 error   4 passing (29ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/authorize' in 1.6s:
131 error $ mocha
131 error
131 error
131 error   Authorize
131 error     ✓ should authorize all wildcards
131 error     ✓ should authorize with no domain
131 error     ✓ should authorize with matching scope
131 error     ✓ should authorize with multiple matching scopes
131 error     ✓ should authorize without priviledges
131 error     ✓ should not authorize if theres a mismatch in priviledges
131 error     ✓ should not authorize if theres a mismatch in root
131 error     ✓ should not authorize if theres a mismatch in domain
131 error     ✓ should not authorize if theres a mismatch in service
131 error     ✓ should not authorize if theres a mismatch in network
131 error     ✓ should not authorize if there is no token
131 error
131 error
131 error   11 passing (50ms)
131 error
131 error lerna info run Ran npm script 'test' in '@sustainers/authorize-command' in 2.3s:
131 error $ mocha
131 error
131 error
131 error   Authorize command
131 error     ✓ should authorize all wildcards (96ms)
131 error     ✓ should authorize with matching scope
131 error     ✓ should authorize with multiple matching scopes
131 error     ✓ should authorize without priviledges
131 error     ✓ should authorize all wildcards with no token and not strict
131 error     ✓ should not authorize if theres a mismatch in priviledges
131 error     ✓ should not authorize if theres a mismatch in root
131 error     ✓ should not authorize if theres a mismatch in domain
131 error     ✓ should not authorize if theres a mismatch in service
131 error     ✓ should not authorize if theres a mismatch in network
131 error     ✓ should not authorize if there are no token
131 error     ✓ should not authorize if there are no token
131 error
131 error
131 error   12 passing (304ms)
131 error
131 error lerna ERR! yarn run test exited 2 in '@sustainers/get-views-js'
131 error lerna ERR! yarn run test exited 2 in '@sustainers/get-views-js'
131 error lerna WARN complete Waiting for 4 child processes to exit. CTRL-C to exit immediately.
131 error error Command failed with exit code 2.
131 error info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
131 error husky > pre-commit hook failed (add --no-verify to bypass)
131 error
131 error     at makeError (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/execa/index.js:174:9)
131 error     at Promise.all.then.arr (/Users/joao/Documents/repos/sustainer-network/sustainers-market-js/node_modules/execa/index.js:278:16)
